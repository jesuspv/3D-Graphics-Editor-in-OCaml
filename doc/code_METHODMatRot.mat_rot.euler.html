<html><head>
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="Start" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of class attributes" rel=Appendix href="index_attributes.html">
<link title="Index of class methods" rel=Appendix href="index_methods.html">
<link title="Index of classes" rel=Appendix href="index_classes.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Estado" rel="Chapter" href="Estado.html">
<link title="Herramientas" rel="Chapter" href="Herramientas.html">
<link title="Menus" rel="Chapter" href="Menus.html">
<link title="Vistas" rel="Chapter" href="Vistas.html">
<link title="Entorno" rel="Chapter" href="Entorno.html">
<link title="Escena" rel="Chapter" href="Escena.html">
<link title="Suelo" rel="Chapter" href="Suelo.html">
<link title="Cilindro" rel="Chapter" href="Cilindro.html">
<link title="Cono" rel="Chapter" href="Cono.html">
<link title="Cubo" rel="Chapter" href="Cubo.html">
<link title="Dibujable" rel="Chapter" href="Dibujable.html">
<link title="Disco" rel="Chapter" href="Disco.html">
<link title="Esfera" rel="Chapter" href="Esfera.html">
<link title="Extrusion" rel="Chapter" href="Extrusion.html">
<link title="Malla" rel="Chapter" href="Malla.html">
<link title="Revolucion" rel="Chapter" href="Revolucion.html">
<link title="Toro" rel="Chapter" href="Toro.html">
<link title="Transformacion" rel="Chapter" href="Transformacion.html">
<link title="Editor" rel="Chapter" href="Editor.html">
<link title="Ventana" rel="Chapter" href="Ventana.html">
<link title="Reflejos" rel="Chapter" href="Reflejos.html">
<link title="Sombras" rel="Chapter" href="Sombras.html">
<link title="XmlMarshal" rel="Chapter" href="XmlMarshal.html">
<link title="Constructor" rel="Chapter" href="Constructor.html">
<link title="Defs" rel="Chapter" href="Defs.html">
<link title="Func" rel="Chapter" href="Func.html">
<link title="MatRot" rel="Chapter" href="MatRot.html">
<link title="Serializable" rel="Chapter" href="Serializable.html">
<link title="Camara" rel="Chapter" href="Camara.html">
<link title="Luz" rel="Chapter" href="Luz.html">
<link title="Material" rel="Chapter" href="Material.html">
<link title="Textura" rel="Chapter" href="Textura.html"><title>MatRot.mat_rot.euler</title>
</head>
<body>
<code class="code"><span class="keyword">method</span>&nbsp;euler&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Calculate&nbsp;Y-axis&nbsp;angle&nbsp;*)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;angle_y&nbsp;=&nbsp;<span class="constructor">Func</span>.rad2grd&nbsp;(asin&nbsp;matriz.(0).(2))&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;c&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;cos&nbsp;(asin&nbsp;matriz.(0).(2))&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;gimball&nbsp;lock?&nbsp;*)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;angle_x,&nbsp;angle_z&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;abs_float&nbsp;c&nbsp;&gt;&nbsp;0.005&nbsp;<span class="keyword">then</span>&nbsp;<span class="keyword">begin</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;angle_x&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;tr_x&nbsp;=&nbsp;&nbsp;&nbsp;matriz.(2).(2)&nbsp;/.&nbsp;c&nbsp;<span class="keyword">in</span>&nbsp;<span class="comment">(*&nbsp;No,&nbsp;so&nbsp;get&nbsp;X-axis&nbsp;angle&nbsp;*)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;tr_y&nbsp;=&nbsp;-.matriz.(1).(2)&nbsp;/.&nbsp;c&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">Func</span>.rad2grd&nbsp;(atan2&nbsp;tr_y&nbsp;tr_x)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;angle_z&nbsp;=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;tr_x&nbsp;=&nbsp;&nbsp;&nbsp;matriz.(0).(0)&nbsp;/.&nbsp;c&nbsp;<span class="keyword">in</span>&nbsp;<span class="comment">(*&nbsp;Get&nbsp;Z-axis&nbsp;angle&nbsp;*)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;tr_y&nbsp;=&nbsp;-.matriz.(0).(1)&nbsp;/.&nbsp;c&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="constructor">Func</span>.rad2grd&nbsp;(atan2&nbsp;tr_y&nbsp;tr_x)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(angle_x,&nbsp;angle_z)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span>&nbsp;<span class="keyword">else</span>&nbsp;<span class="keyword">begin</span>&nbsp;<span class="comment">(*&nbsp;Gimball&nbsp;lock&nbsp;has&nbsp;occurred&nbsp;*)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;angle_x&nbsp;&nbsp;=&nbsp;0.0&nbsp;<span class="keyword">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Set&nbsp;X-axis&nbsp;angle&nbsp;to&nbsp;zero&nbsp;*)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;tr_x&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&nbsp;matriz.(1).(1)&nbsp;<span class="keyword">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;And&nbsp;calculate&nbsp;Z-axis&nbsp;angle&nbsp;*)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;tr_y&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&nbsp;matriz.(1).(0)&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">let</span>&nbsp;angle_z&nbsp;&nbsp;=&nbsp;<span class="constructor">Func</span>.rad2grd&nbsp;(atan2&nbsp;tr_y&nbsp;tr_x)&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(angle_x,&nbsp;angle_z)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">end</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">in</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(angle_x,&nbsp;angle_y,&nbsp;angle_z)</code></body></html>